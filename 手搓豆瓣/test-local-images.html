<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ¬åœ°å›¾ç‰‡åŠ è½½æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-container { display: flex; gap: 20px; flex-wrap: wrap; }
        .test-item {
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 8px;
            width: 200px;
        }
        .test-image {
            width: 150px;
            height: 210px;
            object-fit: cover;
            border: 1px solid #eee;
        }
        .status {
            margin-top: 10px;
            font-size: 12px;
            padding: 5px;
            border-radius: 4px;
        }
        .status.success { background: #e8f5e8; color: #2d5a2d; }
        .status.error { background: #ffeaea; color: #d42c2c; }
        .status.loading { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <h1>æœ¬åœ°ç”µå½±æµ·æŠ¥å›¾ç‰‡åŠ è½½æµ‹è¯•</h1>
    <p>æµ‹è¯•æœ¬åœ°å›¾ç‰‡æ˜¯å¦æ­£ç¡®åŠ è½½ï¼š</p>

    <div class="test-container">
        <div class="test-item">
            <h3>æµ‹è¯•1ï¼šæœ¬åœ°ç”µå½±å›¾ç‰‡</h3>
            <img class="test-image"
                 src="images/movies/1_p2925558247.jpg"
                 alt="éœ‡è€³æ¬²è‹"
                 onload="updateStatus(this, 'success')"
                 onerror="updateStatus(this, 'error')">
            <div class="status loading">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-item">
            <h3>æµ‹è¯•2ï¼šæœ¬åœ°ç”µè§†å‰§å›¾ç‰‡</h3>
            <img class="test-image"
                 src="images/tv/2001_p2924218592.jpg"
                 alt="è¡Œéª—å¤©ä¸‹KR"
                 onload="updateStatus(this, 'success')"
                 onerror="updateStatus(this, 'error')">
            <div class="status loading">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-item">
            <h3>æµ‹è¯•3ï¼šä¸å­˜åœ¨çš„æœ¬åœ°å›¾ç‰‡</h3>
            <img class="test-image"
                 src="images/movies/nonexistent.jpg"
                 alt="ä¸å­˜åœ¨çš„å›¾ç‰‡"
                 onload="updateStatus(this, 'success')"
                 onerror="handleLocalImageError(this)">
            <div class="status loading">åŠ è½½ä¸­...</div>
        </div>

        <div class="test-item">
            <h3>æµ‹è¯•4ï¼šåŸå§‹è±†ç“£URL</h3>
            <img class="test-image"
                 src="https://img3.doubanio.com/view/photo/s_ratio_poster/public/p2925558247.jpg"
                 alt="è±†ç“£å›¾ç‰‡"
                 onload="updateStatus(this, 'success')"
                 onerror="updateStatus(this, 'error')">
            <div class="status loading">åŠ è½½ä¸­...</div>
        </div>
    </div>

    <h2>æµ‹è¯•ç»“æœåˆ†æï¼š</h2>
    <div id="results"></div>

    <script>
        let testResults = [];

        function updateStatus(img, status) {
            const statusDiv = img.nextElementSibling;
            statusDiv.className = `status ${status}`;

            const testName = img.parentElement.querySelector('h3').textContent;

            if (status === 'success') {
                statusDiv.textContent = 'âœ… åŠ è½½æˆåŠŸ';
                testResults.push({test: testName, status: 'success', message: 'å›¾ç‰‡åŠ è½½æˆåŠŸ'});
            } else if (status === 'error') {
                statusDiv.textContent = 'âŒ åŠ è½½å¤±è´¥';
                testResults.push({test: testName, status: 'error', message: 'å›¾ç‰‡åŠ è½½å¤±è´¥'});
            }

            // æ˜¾ç¤ºæ±‡æ€»ç»“æœ
            if (testResults.length === 4) {
                showResults();
            }
        }

        function handleLocalImageError(img) {
            // å¤„ç†æœ¬åœ°å›¾ç‰‡é”™è¯¯
            updateStatus(img, 'error');
            const statusDiv = img.nextElementSibling;
            statusDiv.textContent = 'âš ï¸ æœ¬åœ°å›¾ç‰‡ä¸å­˜åœ¨';

            const testName = img.parentElement.querySelector('h3').textContent;
            testResults.push({test: testName, status: 'error', message: 'æœ¬åœ°å›¾ç‰‡æ–‡ä»¶ä¸å­˜åœ¨'});

            if (testResults.length === 4) {
                showResults();
            }
        }

        function showResults() {
            const resultsDiv = document.getElementById('results');
            const successCount = testResults.filter(r => r.status === 'success').length;
            const errorCount = testResults.filter(r => r.status === 'error').length;

            resultsDiv.innerHTML = `
                <h3>ğŸ“Š æµ‹è¯•ç»“æœæ±‡æ€»ï¼š</h3>
                <p>âœ… æˆåŠŸ: ${successCount} é¡¹</p>
                <p>âŒ å¤±è´¥: ${errorCount} é¡¹</p>
                <h4>è¯¦ç»†ç»“æœï¼š</h4>
                <ul>
                    ${testResults.map(r => `<li><strong>${r.test}:</strong> ${r.message}</li>`).join('')}
                </ul>
                <h4>ğŸ’¡ ç»“è®ºï¼š</h4>
                <p>æœ¬åœ°å›¾ç‰‡åŠ è½½${successCount > 2 ? 'âœ… æ­£å¸¸' : 'âŒ å¼‚å¸¸'}</p>
                <p>å»ºè®®ï¼šç¡®ä¿æ‰€æœ‰å›¾ç‰‡éƒ½å·²ä¸‹è½½åˆ°æœ¬åœ°imagesç›®å½•ä¸­</p>
            `;
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æ‰€æœ‰å›¾ç‰‡
        window.addEventListener('load', () => {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æµ‹è¯•æœ¬åœ°å›¾ç‰‡...');
        });
    </script>
</body>
</html>
