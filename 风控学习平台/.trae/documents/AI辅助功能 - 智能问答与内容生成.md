## AI内容生成功能实施计划（接入DeepSeek）

### 功能范围
专注于内容生成，暂时不做智能问答助手和知识库问答。

### 第一阶段：基础架构搭建（预计 4h）
1. **安装依赖**
   - 安装 DeepSeek SDK 或配置 API 调用
   - 流式响应处理

2. **创建AI服务层** (`src/services/aiService.ts`)
   - 封装 DeepSeek API 调用
   - 配置管理（API Key、模型选择、温度参数）
   - 错误处理和重试机制
   - 支持流式输出

3. **创建Prompt模板** (`src/config/aiPrompts.ts`)
   - 场景描述生成模板
   - 风险类型推荐模板
   - 检测规则生成模板
   - 处置策略生成模板

### 第二阶段：场景描述生成功能（预计 4h）
1. **在场景编辑页集成**
   - 在描述输入框旁增加「AI生成」按钮
   - 点击后弹出AI生成对话框
   - 显示生成进度和结果预览
   - 支持重新生成和确认使用

2. **上下文传递**
   - 传递场景名称、分类、标签等信息
   - 生成符合风控业务语境的描述

### 第三阶段：风控节点内容生成（预计 6h）
1. **风险类型推荐** (`RiskNodeEdit.tsx`)
   - 根据节点名称和类型推荐风险类型
   - 一键添加到风险类型列表

2. **检测规则生成**
   - 基于已有风险特征生成检测规则
   - 自然语言描述转规则表达式

3. **处置策略建议**
   - 根据风险严重程度推荐处置策略

### 第四阶段：输入参数生成（预计 4h）
1. **参数推荐**
   - 根据场景和节点类型推荐常用参数
   - 自动生成参数结构和示例值

### DeepSeek配置
- **模型选择**: `deepseek-chat` (V3) 或 `deepseek-reasoner` (R1)
- **API端点**: `https://api.deepseek.com/v1/chat/completions`
- **流式输出**: 支持 SSE 流式响应

### UI设计
- 使用 Ant Design 的 Modal/Drawer 作为生成对话框
- 显示生成中的 loading 状态
- 支持生成结果预览和编辑
- 一键应用生成的内容

### 配置管理
- 在系统设置或个人中心增加 DeepSeek API Key 配置
- 本地存储配置信息

请确认此计划后，我将开始实施第一阶段：基础架构搭建。